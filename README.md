
# تحلیل داده‌های هواشناسی و الگوهای بارش در شهرهای ایران

##  معرفی پروژه

این پروژه با هدف تحلیل داده‌های هواشناسی در سه شهر تهران، قم و رشت، در بازه زمانی 2020 تا 2024 انجام شده است. تمرکز اصلی پروژه بر پیدا کردن یک الگوی بارشی در هر فصل است. به همین منظور عوامل متعددی از جمله دما، میزان بارش(برف و باران) و بین سه شهر را بررسی کرده تا عواملی که تاثیر بیشتری  بر الگوی بارشی دارند را بتواینم پیدا کنیم. این پروژه از بخش های مختلفی تشکیل شده است که بصورت کامل به توضیح در م
##  پیش‌نیازها

برای اجرای این نوت ‌بوک نیاز به نصب پکیج‌ های زیر دارید که در فایل `requirements.txt` نیز آمده است:

```
pandas~=2.3.1
numpy~=2.3.1
seaborn~=0.13.2
matplotlib~=3.10.3
jdatetime~=5.2.0
tabulate~=0.9.0
```

نصب با دستور:
```bash
pip install -r requirements.txt
```

## مراحل انجام تحلیل

### 1. خواندن داده‌ ها
داده‌های هواشناسی از فایل weather.csv بارگذاری شده‌اند. این داده ها از سایت  open-mateo دانلود شده اند و برای این که نتایج ارزیابی دقیق تر باشد دیتای 5 سال در پروژه در نظر گرفته شده است.

### 2. بهینه ‌سازی داده ‌ها
برای کاهش حجم فایل داده از تابع  `auto_data_type`  استفاده شده است که همه داده ها را بررسی کرده و آن ها را به دیتا تایپی که باعث می شود حجم کمتری بگیرد وداده ای از بین نرود، تبدیل کند. این کار باعث می شود حافظه کمتری مصرف شود.

### 3. تشخیص داده ‌های پرت و حذف آن ها (Outliers)
بر اساس نمودار زیر می توان نتیجه گرفت که در شهر رشت چند داده پرت وجود دارد به عبارتی دیگر در بعضی از روز ها بارش غیر معمول داشته است. به همین خاطر برای این که داده ها را در شرایط نرمال بررسی کنیم این داده ها را حذف می کنیم. حذف داده های پرت با استفاده از میانگین و انحراف معیار انجام شده است که داده هایی در بازه [mean-*3std,mean+3*std] نگه می داریم ضریبی که برای انحراف معیار در نظر گرفته شده است می
### 4. مصورسازی بارش فصلی
نمودارهای ستونی بارش فصلی برای هر شهر ترسیم شده‌اند و ترتیب فصل‌ها رعایت شده است.


### 5.   استخراج ویژگی
برای این که بتوانیم تحلیل دقیق تری در هر فصل داشته باشیم، از ستون time  ماه و سال و فصل آن را استخراج می کنیم. چون در بخش های آتی بطور مثال فصل بهار را در سال های 2020 تا 2024 برای یک شهر بررسی کردیم


### 5.   نرمال سازی
با توجه به بررسی هاییی که بر روی داده ها انجام گرفته است میزان بارش شهر رشت به مراتب بیشتر از تهران و قم بوده است. برای این که مقایسه دقیق تری صورت بگیرد داده ها را با استفاده از MinMaxScaler  نرمال سازی می کنیم
![نمودار بارش تهران](images/scaling.png)


### 5.  پیدا کردن عوامل موثر
با استفاده نمودار heatmap می توان نتیجه گرفت که بین دما و میزان بارش همبستگی قوی ای وجود دارد و ارتباط بین آن ها نیز معکوس است. بطور مثال هر چه دما پایین تر باشد میزان بارش بیشتر است و بالعکس.  این نتیجه را می توان در  پلات زیر هم مشاهده کرد که بیشتر بارش ها در فصل های پاییز و زمستان در هر سه شهر رخ داده است. هم چنین می توان نتیجه گرفت که اگر بعد از هر شهری، شهر دیگری کاهش دمایی را تجربه کند این ا

![ارتباط بین عوامل](images/heatmap.png)



## 📊 نتایج پروژه

- تهران بارش متعادل‌تری دارد و در زمستان افزایش بارش دیده می‌شود.
- قم کم‌باران‌ترین شهر است و بیشترین بارش آن در پاییز و زمستان رخ می‌دهد.
- رشت بیشترین بارش را دارد، مخصوصاً در پاییز.
- توالی بارش در فصل‌ها تحلیل شده و رایج‌ترین الگوهای گردش بارش بین شهرها نمایش داده شده‌اند.

نمونه خروجی جداول توالی بارش ها به تفکیک هر فصل:
همان طور که در تصویر زیر مشاهده می کنید به تفیکی هر فصل الگو های بارشی استخراج شده است. با استفاده از داده ها، زمانی که بارش در هر شهری شروع می شود این را به عنوان نقطه ابتدایی در نظر گرفته می شود و در روز ها آتی بررسی می شود که در چه شهر های دیگری بارندگی رخ می دهد. با استفاده از این روش در هر فصل به یک سری از الگو های بارشی می رسیم. همان طور که در عکس زیر مشاهده می کنید برای هر الگویی که پیدا دشه است تعداد دفعاتی که این الگو در آن فصل و در سال های 2020 تا 2024 رخ داده است را محاسبه می کنیم. در پایان الگویی که بیشترین تکرار را داشته است به عنوان الگوی رایج در آن فصل در نظر گرفته شده است.

![خروجی پروژه](images/output.png)

لازم به ذکر است که در فصل تابستان پون عمدتا بارشی رخی نداده است، در نتیجه الگوی بارشی ای یافت نشده است.

